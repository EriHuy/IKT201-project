@model IEnumerable<Cart>

@{
    ViewData["Title"] = "Home Page";
}

@foreach (var Cart in Model)
{
    <div>
        <table>
            <th>
                @Cart.ProductName @Cart.Price kr Quantity @Cart.Quantity <img class="images" alt="Image Description" id="@Cart.ProductId">
            </th>
            <th>
                <form asp-action="RemoveItem" asp-route-productId="@Cart.ProductId" method="post">
                    <button type="submit">Remove</button>
                </form>
            </th>
            <th>
                <form asp-action="UpdateItem" asp-route-productId="@Cart.ProductId" method="post">
                    <input type="number" name="quantity" value="@Cart.Quantity" min="1"/>
                </form>
            </th>
        </table>
    </div>
     
    // Function for checking if image is a address http, https, ftp or in a local folder 
    <script>
        function CheckImageString(ImageString) {
            const urlPattern = /^(https?|ftp):\/\/[^\s/$.?#].[^\s]*$/i;
            if(urlPattern.test(ImageString)){
                let image = ImageString
                document.getElementById('@Cart.ProductId').src=image;
            }else{
                let image = "Images/" + ImageString
                document.getElementById('@Cart.ProductId').src=image;
            }
        }
        CheckImageString("@Cart.ImageUrl")
    </script>
}
<p>Total Cost: @ViewBag.TotalCost</p>
